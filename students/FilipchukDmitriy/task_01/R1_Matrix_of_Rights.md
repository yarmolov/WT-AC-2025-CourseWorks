# Вариант 16 — Матрица прав (операция × роль)

Операции: Просмотр тетрадей, Создать/Редактировать/Удалить Notebook, Создать/Редактировать/Удалить Note, Управление метками, Управление доступом (Share), Управление пользователями, История изменений.

Роли: Администратор, Пользователь

Таблица (кто может что)

- Просмотр своих тетрадей: Администратор, Пользователь
- Просмотр чужих тетрадей (при наличии Share): Администратор, Пользователь
- Создать Notebook: Администратор, Пользователь
- Редактировать/Удалить свой Notebook: Администратор, Пользователь
- Редактировать/Удалить чужой Notebook: Администратор
- Создать Note: Администратор, Пользователь (в своих или расшаренных тетрадях с permission=write)
- Редактировать Note: Администратор, Пользователь (владелец или при наличии permission=write); 403 при permission=read
- Удалить Note: Администратор, Пользователь (владелец тетради)
- Создать/Редактировать/Удалить свою Label: Администратор, Пользователь
- Создать/Редактировать/Удалить системную Label (is_system=true): Администратор
- Создать Share: Администратор, Пользователь (владелец тетради); нельзя поделиться с самим собой
- Редактировать Share (изменить permission): Администратор, Пользователь (владелец тетради)
- Удалить Share: Администратор, Пользователь (владелец тетради), Получатель доступа (отказ от Share)
- Управление пользователями: Администратор
- Удаление своего аккаунта: Пользователь (self-delete запрещено, только Администратор)
- Просмотр истории изменений Note: Администратор, Пользователь (владелец или при наличии любого доступа)
- Восстановление версии Note: Администратор, Пользователь (владелец или при наличии permission=write)

Примечания:

- Пользователь видит только свои тетради и те, к которым есть доступ (scope ограничение).
- Уровень доступа в Share определяет, может ли пользователь редактировать (write) или только просматривать (read).
- При попытке редактирования с permission=read возвращается ошибка 403 Forbidden.
- При попытке создать дублирующий Share возвращается ошибка 409 Conflict.
- Системные метки (is_system=true) доступны всем пользователям для чтения, но редактируются только Администратором.
