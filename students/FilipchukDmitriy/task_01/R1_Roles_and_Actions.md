# Вариант 16 — Заметки «Пишем вдвоём» — Роли и действия

Краткое описание

MVP: Notebook, Note, Label, Share, NoteHistory, User. UI отображает тетради с заметками, метки, совместный доступ и историю изменений; API: /notebooks, /notes, /labels, /shares, /notes/{id}/history. Приёмка (MVP): корректное создание и управление доступами (Share).

Роли и основные действия

- Администратор
  - CRUD для пользователей
  - CRUD для тетрадей (Notebook) и заметок (Note)
  - Просмотр всех данных в системе
  - Управление метками (Label), включая системные (is_system=true)
  - Удаление пользователей (пользователь не может удалить сам себя)

- Пользователь
  - Создание и редактирование своих тетрадей и заметок
  - Управление своими метками для заметок
  - Использование системных меток (только чтение)
  - Предоставление доступа к тетрадям (Share) — нельзя поделиться с самим собой
  - Просмотр тетрадей, к которым предоставлен доступ
  - Совместное редактирование заметок (требуется permission=write, иначе 403)
  - Просмотр истории изменений заметок
  - Восстановление предыдущих версий заметок (требуется permission=write)
  - Отказ от полученного доступа (self-unshare)

Примеры сценариев

- Пользователь создаёт тетрадь, добавляет заметки, присваивает метки → делится тетрадью с другим пользователем с permission=write → оба могут редактировать заметки.
- Пользователь с permission=read может только просматривать заметки, при попытке редактирования получает ошибку 403.
- Пользователь просматривает историю изменений заметки и восстанавливает предыдущую версию.
- Администратор просматривает список пользователей и их активность, может удалять аккаунты.
- Администратор создаёт системные метки, доступные всем пользователям.
