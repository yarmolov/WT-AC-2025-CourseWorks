# Вариант 14 — Прогресс «До сессии успею» — Роли и действия

Краткое описание

MVP: Topic, Goal, ProgressEntry, User. UI отображает диаграммы прогресса и список целей; API: /topics, /goals, /progress, /reports. Приёмка (MVP): корректное создание и отображение диаграмм прогресса.

Роли и основные действия

- **Администратор**
  - CRUD для пользователей (создание, просмотр, редактирование, удаление)
  - CRUD для тем (Topic)
  - Создание и удаление целей (Goal), редактирование всех полей Goal
  - Просмотр прогресса всех пользователей
  - Просмотр отчётов и статистики по всем пользователям и темам
  - Полный доступ ко всем данным системы

- **Пользователь**
  - Просмотр списка всех тем (Topic)
  - Просмотр списка только своих целей (Goal)
  - Редактирование своих целей (только поля: name, description, deadline)
  - Добавление записей прогресса (ProgressEntry) только к своим целям
  - Редактирование и удаление своих записей прогресса
  - Просмотр личных диаграмм и графиков прогресса
  - Генерация личных отчётов (только по своим данным)
  - ~~Настройка напоминаний~~ (НЕ входит в MVP, только бонус)

## Примеры сценариев использования

### Сценарий 1: Администратор настраивает систему

1. Администратор создаёт темы (Topic): "Математика", "Физика", "Программирование"
2. Администратор создаёт цели (Goal) и назначает их пользователям:
   - "Решить 100 задач по математике" → пользователь ivanov, target_value=100
   - "Изучить 10 тем по физике" → пользователь petrov, target_value=10
3. Пользователи получают доступ к своим целям

### Сценарий 2: Пользователь работает с прогрессом

1. Пользователь ivanov заходит в систему
2. Видит свои цели на дашборде (только те, где user_id = ivanov.id)
3. Выбирает цель "Решить 100 задач по математике"
4. Добавляет запись прогресса: `POST /progress {goalId, value: 10, comment: "Решил задачи 1-10"}`
5. Система вычисляет процент выполнения: (10 / 100) * 100 = 10%
6. Диаграмма на дашборде обновляется, показывая новый прогресс

### Сценарий 3: Пользователь корректирует цель

1. Пользователь понимает, что deadline слишком жёсткий
2. Открывает свою цель на редактирование
3. Изменяет deadline и description (targetValue изменить не может — только admin)
4. Система сохраняет изменения

### Сценарий 4: Администратор анализирует данные

1. Администратор заходит в раздел отчётов
2. Запрашивает статистику по теме "Математика": `GET /reports/topic/{math-topic-id}`
3. Видит, сколько пользователей работают над целями по этой теме
4. Видит общий процент выполнения и может принять решение о корректировке целей

### Сценарий 5: Безопасность в действии (примеры отказа в доступе)

1. Пользователь ivanov пытается добавить прогресс к цели пользователя petrov → ❌ 403 Forbidden
2. Пользователь пытается просмотреть `GET /goals` → получает только свои цели (scope-фильтр)
3. Пользователь пытается изменить свою роль на admin через `PUT /users/{id}` → ❌ 403 Forbidden
4. Пользователь пытается удалить чужую цель → ❌ 403 Forbidden
