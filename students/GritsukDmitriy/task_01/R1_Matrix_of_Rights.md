# Вариант 24 — Матрица прав (операция × роль)

Операции: Просмотр roadmaps, Создать/Редактировать/Удалить Roadmap, Просмотр шагов, Создать/Редактировать/Удалить Step, Просмотр ресурсов, Создать/Редактировать/Удалить Resource, Отметить прогресс, Просмотр прогресса, Управление пользователями, Просмотр своего профиля, Редактирование своего профиля.

Роли: Администратор, Пользователь

Таблица (кто может что)

| Операция | Администратор | Пользователь |
|----------|---------------|--------------|
| Просмотр roadmaps | ✓ (все) | ✓ (только published) |
| Создать Roadmap | ✓ | ✗ |
| Редактировать Roadmap | ✓ | ✗ |
| Удалить Roadmap | ✓ | ✗ |
| Просмотр шагов (Step) | ✓ | ✓ (только из published) |
| Создать Step | ✓ | ✗ |
| Редактировать Step | ✓ | ✗ |
| Удалить Step | ✓ | ✗ |
| Просмотр ресурсов (Resource) | ✓ | ✓ (только из published) |
| Создать Resource | ✓ | ✗ |
| Редактировать Resource | ✓ | ✗ |
| Удалить Resource | ✓ | ✗ |
| Отметить прогресс (Progress) | ✗ | ✓ (только свой) |
| Просмотр прогресса | ✓ (всех пользователей) | ✓ (только свой) |
| Управление пользователями (CRUD) | ✓ | ✗ |
| Просмотр своего профиля | ✓ | ✓ |
| Редактирование своего профиля | ✓ | ✓ (без изменения role) |

Примечания:

- **Пользователь** видит только свой прогресс (scope: `user_id` из JWT).
- **Пользователь** может просматривать и редактировать только свой профиль (scope: `id` из JWT).
- **Пользователь** не может изменять своё поле `role`.
- **Администратор** видит только опубликованные roadmaps в публичных списках, но имеет доступ ко всем через админ-панель.
- **Администратор** не отмечает прогресс за других пользователей (нет такого сценария).
- **Scope-проверки** реализуются на уровне middleware: JWT → `user_id`, `role` → проверка доступа.
