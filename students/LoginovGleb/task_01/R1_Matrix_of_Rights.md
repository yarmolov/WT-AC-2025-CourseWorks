# Вариант 40 — Матрица прав (операция × роль)

Операции: Просмотр форм, CRUD для Form, Создать заявку, Просмотр заявок, Редактировать/Удалить заявку, Изменить статус заявки, Загрузить вложения, Просмотр вложений, Управление статусами, Управление пользователями, Просмотр журнала.

Роли: Администратор, Модератор, Пользователь, Гость

Таблица (кто может что)

| Операция                          | Администратор | Модератор | Пользователь | Гость |
|-----------------------------------|:-------------:|:---------:|:------------:|:-----:|
| Просмотр списка форм              | ✓             | ✓         | ✓            | ✓     |
| Создать Form                      | ✓             | ✗         | ✗            | ✗     |
| Редактировать Form                | ✓             | ✗         | ✗            | ✗     |
| Удалить Form                      | ✓             | ✗         | ✗            | ✗     |
| Создать заявку (Application)      | ✓             | ✗         | ✓            | ✗     |
| Просмотр своих заявок             | ✓             | ✓         | ✓            | ✗     |
| Просмотр всех заявок              | ✓             | ✓         | ✗            | ✗     |
| Редактировать заявку (черновик)   | ✓             | ✗         | ✓ (свои)     | ✗     |
| Удалить заявку                    | ✓             | ✗         | ✓ (свои)     | ✗     |
| Изменить статус заявки            | ✓             | ✓         | ✗            | ✗     |
| Загрузить Attachment              | ✓             | ✗         | ✓ (свои)     | ✗     |
| Просмотр Attachment               | ✓             | ✓         | ✓ (свои)     | ✗     |
| Удалить Attachment                | ✓             | ✗         | ✓ (свои)     | ✗     |
| Создать Status                    | ✓             | ✗         | ✗            | ✗     |
| Редактировать Status              | ✓             | ✗         | ✗            | ✗     |
| Удалить Status                    | ✓             | ✗         | ✗            | ✗     |
| Управление пользователями (CRUD)  | ✓             | ✗         | ✗            | ✗     |
| Просмотр журнала событий          | ✓             | ✓ (огр.)  | ✓ (свои)     | ✗     |
| Отозвать заявку (withdraw)        | ✓             | ✗         | ✓ (свои)     | ✗     |
| Настройка этапов согласования     | ✓             | ✗         | ✗            | ✗     |

Примечания:

- **Гость** — неаутентифицированный пользователь, не имеющий записи в таблице `users`.
- По умолчанию пользователь видит только свои заявки и вложения (scope ограничение).
- Модератор может изменять статус заявок, но не может редактировать содержимое заявки и не может создавать заявки.
- Пользователь может редактировать заявку только в статусе «черновик» (draft).
- Удаление заявки пользователем возможно только до отправки на рассмотрение.
- Пользователь может отозвать (withdraw) свою заявку, если она не в финальном статусе.
- Ограничение на вложения: max 10 файлов на заявку, общий размер до 50 МБ.
