# Вариант 20 — Карточки (обязательные поля и валидации)

## 1. Форма аутентификации (Auth)

username: string, только буквы/цифры/_, длина 3–32, не пустое
→ ошибка: «Введите корректное имя пользователя (латиница, цифры, подчёркивание).»

password: string, длина ≥ 6, не пустое
→ ошибка: «Введите пароль (не менее 6 символов).»

## 2. Карточка пользователя (User)

- id: UUID (автогенерация)
- username: string, уникальное, 3–32 символа, только латиница/цифры/_, не пустое
    → ошибка: «Введите корректное имя пользователя.»
- email: string, email-формат, не пустое
    → ошибка: «Введите корректный email.»
- password_hash: string (server-only)
- role: enum user, admin user, admin, default: user
    → ошибка: «Укажите корректную роль.»

## 3. Карточка поста (Post)

- id: UUID
- author_id: reference → User.id, не пустое
    → ошибка: «Укажите автора поста.»
- text: string, не пустое, max 280 символов
    → ошибка: «Текст поста не может быть пустым.»
    → ошибка: «Максимальная длина поста — 280 символов.»
- created_at: datetime

## 4. Карточка подписки (Follow)

- follower_id: reference → User.id, не пустое
    → ошибка: «Укажите пользователя, который подписывается.»
- target_id: reference → User.id, не пустое
    → ошибка: «Укажите пользователя, на которого выполняется подписка.»
- unique(follower_id + target_id) — не может подписаться дважды
    → ошибка: «Вы уже подписаны на этого пользователя.»

## 5. Карточка лайка (Like)

- user_id: reference → User.id, не пустое
    → ошибка: «Укажите пользователя.»
- post_id: reference → Post.id, не пустое
    → ошибка: «Укажите пост.»
- unique(user_id + post_id)
    → ошибка: «Вы уже лайкнули этот пост.»

## 6. Карточка ответа (Reply)

- id: UUID
- post_id: reference → Post.id, не пустое
    → ошибка: «Укажите пост для ответа.»
- author_id: reference → User.id, не пустое
    → ошибка: «Укажите автора ответа.»
- text: string, не пустое, max 280 символов
    → ошибка: «Ответ не может быть пустым.»
    → ошибка: «Максимальная длина ответа — 280 символов.»
- created_at: datetime

## 7. Карточка жалобы/репорта (Report)

- id: UUID
- post_id: reference → Post.id, не пустое
    → ошибка: «Укажите пост, на который подаётся жалоба.»
- reported_by: reference → User.id, не пустое
    → ошибка: «Укажите пользователя, который подаёт жалобу.»
- reason: string, не пустое, max 500
    → ошибка: «Опишите причину жалобы.»
- status: enum open,reviewed open,reviewed, default: open
    → ошибка: «Укажите корректный статус.»
- created_at: datetime

## 8. Карточка модераторского действия (опционально)

Если используется workflow у админа:
    - action_type: enum deletepost,blockuser delete post,block user, не пустое
        → ошибка: «Укажите тип действия.»
    - target_object: enum post,user post,user, не пустое
        → ошибка: «Укажите объект модерации.»
    - comment: string, max 2000
