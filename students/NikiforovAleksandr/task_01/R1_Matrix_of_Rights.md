# Вариант 03 — Матрица прав (операция × роль)

## Mini-LMS «Учись, не болей»

Роли системы:

- **Student** — обучающийся пользователь
- **Teacher** — преподаватель
- **Admin** — расширенная роль преподавателя (статистика и администрирование)

> Примечание: роли **Teacher** и **Admin** имеют равные права на управление учебным контентом.
> Отличие Admin — доступ к агрегированной статистике платформы.

---

## Таблица прав (операция × роль)

| Операция | Student | Teacher | Admin | Примечание |
| -------- | ------- | ------- | ----- | ---------- |
| **Аутентификация и профиль** | | | | |
| POST /register | ✓ | ✓ | ✓ | Без JWT |
| POST /login | ✓ | ✓ | ✓ | Без JWT |
| GET /profile | ✓ | ✓ | ✓ | Только свой профиль |
| GET /profile/stats | ✓ | ✗ | ✗ | Только студент |
| **Курсы** | | | | |
| GET /courses | ✓ | ✓ | ✓ | Просмотр курсов |
| GET /courses/{id} | ✓ | ✓ | ✓ | Детали курса |
| POST /courses | ✗ | ✓ | ✓ | Создание курса |
| PATCH /courses/{id} | ✗ | ✓ | ✓ | Редактирование |
| DELETE /courses/{id} | ✗ | ✓ | ✓ | Удаление |
| POST /courses/{id}/enroll | ✓ | ✗ | ✗ | Запись студента |
| **Модули и уроки** | | | | |
| POST /courses/{course_id}/modules | ✗ | ✓ | ✓ | Создание модуля |
| POST /modules/{module_id}/lessons | ✗ | ✓ | ✓ | Создание урока |
| GET /modules/{id} | ✓ | ✓ | ✓ | Просмотр |
| GET /lessons/{id} | ✓ | ✓ | ✓ | Просмотр |
| **Задания** | | | | |
| POST /lessons/{lesson_id}/assignments | ✗ | ✓ | ✓ | Создание задания |
| GET /assignments/{id} | ✓ | ✓ | ✓ | Просмотр задания |
| GET /assignments/my | ✓ | ✗ | ✗ | Задания студента |
| GET /teaching/assignments | ✗ | ✓ | ✓ | Задания преподавателя |
| POST /assignments/{id}/start | ✓ | ✗ | ✗ | Начать задание |
| POST /assignments/{id}/submit-simple | ✓ | ✗ | ✗ | Сдать задание |
| **Сдачи и оценки** | | | | |
| GET /assignments/{id}/submissions | ✗ | ✓ | ✓ | Сдачи студентов |
| POST /submissions/{id}/grade | ✗ | ✓ | ✓ | Оценивание |
| GET /my/submissions | ✓ | ✗ | ✗ | Сдачи студента |
| GET /grades/detailed | ✓ | ✗ | ✗ | Оценки студента |
| **Администрирование** | | | | |
| GET /admin/stats | ✗ | ✓ | ✓ | Статистика платформы |
| **Документация** | | | | |
| GET /docs (Swagger UI) | ✓ | ✓ | ✓ | Доступна всем |

---

## Правила и ограничения

1. **Аутентификация**
   - Все защищённые эндпоинты требуют JWT в заголовке  
     `Authorization: Bearer <token>`
   - JWT содержит `user_id` и `role`

2. **Разграничение доступа**
   - Студент имеет доступ только к собственным данным (задания, сдачи, оценки)
   - Преподаватель видит сдачи всех студентов в рамках своих курсов
   - Администратор не получает персональные данные сверх необходимого

3. **Задания и сдачи**
   - Студент может иметь только одну сдачу на одно задание
   - Студент не может оценивать задания
   - Преподаватель может оценивать задания в диапазоне 0–100 баллов

4. **Курсы**
   - Создание, редактирование и удаление курсов доступно только Teacher/Admin
   - Запись на курс доступна только студенту
   - Уникальность: один пользователь может быть записан на курс только один раз

5. **Роль Admin**
   - Admin наследует все права Teacher
   - Admin имеет доступ к агрегированной статистике платформы
   - Admin не имеет специальных CRUD-прав сверх Teacher в учебном контенте
