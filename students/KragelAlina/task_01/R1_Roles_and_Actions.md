# Вариант 29 — Кино/сериалы «Что посмотреть?» — Роли и действия

Краткое описание

MVP: User (user/admin), Title, Person, List, Review, Rating.
UI отображает каталог фильмов/сериалов с фильтрацией, карточку названия, личные списки просмотра, рецензии и возможность оценивания.
API: /titles, /lists, /reviews, /ratings, /register, /login, /admin/load_movies.
Приёмка (MVP): регистрация, вход, просмотр фильмов с фильтрацией, управление списком просмотра, написание рецензий и оценивание.

Роли и основные действия

- Администратор (role='admin')
  - Все права пользователя плюс:
  - CRUD для каталога фильмов (POST/PUT/DELETE /titles)
  - Загрузка фильмов из TMDB (/admin/load_movies)
  - Управление персоналиями в фильмах

- Пользователь (role='user', по умолчанию)
  - Просмотр каталога фильмов/сериалов
  - Фильтрация по названию, жанру, году выпуска
  - Добавление/обновление фильмов в свой список просмотра (GET/POST/DELETE /lists)
  - Изменение статуса просмотра: planned → watching → completed (или dropped)
  - Написание, редактирование и удаление своих рецензий (POST/DELETE /reviews)
  - Просмотр рецензий других пользователей
  - Написание, редактирование и удаление своих оценок (POST/DELETE /ratings)
  - Просмотр оценок других пользователей
  - Просмотр всех фильмов и персон

Примеры сценариев

1. Пользователь регистрируется
   - Заходит на страницу регистрации
   - Вводит username и password (min 3 и 6 символов соответственно)
   - Система создаёт пользователя с role='user'
   - Пользователь получает возможность входить

2. Пользователь просматривает каталог
   - Заходит в приложение → видит список фильмов с постраничной навигацией
   - Фильтрует по названию "Inception" → видит результаты
   - Фильтрует по году >= 2010 → видит только новые фильмы
   - Открывает карточку фильма → видит информацию, жанр, год, персоналии

3. Пользователь управляет списком просмотра
   - Открывает фильм "Inception"
   - Нажимает "Добавить в список" с статусом "planned"
   - Позже обновляет статус на "watching" через личный список
   - После просмотра меняет на "completed"
   - Может удалить фильм из списка

4. Пользователь пишет рецензию и оценивает
   - На странице фильма видит форму для рецензии
   - Пишет текст рецензии (опционально)
   - На той же странице видит форму для оценки (1-10)
   - Система не позволяет написать более одной рецензии на один фильм
   - Система не позволяет поставить более одной оценки на один фильм
   - Может отредактировать или удалить свою рецензию/оценку

5. Администратор управляет каталогом
   - Входит как admin (role='admin')
   - Добавляет новый фильм через форму: название, тип (movie/series), жанр, год
   - Может отредактировать информацию о фильме
   - Может удалить фильм
   - Загружает фильмы из TMDB через /admin/load_movies (сухой прогон или реальная загрузка)

6. Пользователь просматривает рецензии и оценки
   - На странице фильма видит список рецензий других пользователей
   - Видит список оценок (score) других пользователей
   - Может фильтровать рецензии по title_id в API
